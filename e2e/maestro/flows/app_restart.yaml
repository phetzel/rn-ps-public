appId: com.phetzel.rnps
name: App Restart and Resume
tags:
  - smoke
  - persistence
onFlowStart:
  - launchApp
---
# Connect to dev server
- runFlow: ../shared/connect_dev_server.yaml

# Wait for app to load
- extendedWaitUntil:
    visible: '.*'
    timeout: 30000

# Dismiss disclaimer if present
- tapOn:
    id: 'disclaimer-acknowledge-button'
    optional: true

# Clean up any existing games first
- runFlow: ../shared/cleanup_games.yaml

# Create a new game
- runFlow: ../shared/setup_game.yaml

# Kill and relaunch the app
- stopApp
- launchApp

# Reconnect to dev server
- runFlow: ../shared/connect_dev_server.yaml

# Wait for app to load after restart
- extendedWaitUntil:
    visible: '.*'
    timeout: 30000

# Dismiss disclaimer if present
- tapOn:
    id: 'disclaimer-acknowledge-button'
    optional: true

# Wait for home screen
- extendedWaitUntil:
    visible:
        id: 'start-new-game-button'
    timeout: 15000

# Verify game persisted - manage games button should exist
- extendedWaitUntil:
    visible:
        id: 'manage-games-button'
    timeout: 10000

# Test passes - game data persisted across restart

