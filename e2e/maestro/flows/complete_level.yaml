appId: com.phetzel.rnps
name: Complete Level Flow
tags:
  - smoke
  - critical
onFlowStart:
  - launchApp
---
# Connect to dev server
- runFlow: ../shared/connect_dev_server.yaml

# Wait for app to load
- extendedWaitUntil:
    visible: '.*'
    timeout: 30000

# Dismiss disclaimer if present
- tapOn:
    id: 'disclaimer-acknowledge-button'
    optional: true

# Clean up any existing games first
- runFlow: ../shared/cleanup_games.yaml

# Create a new game
- runFlow: ../shared/setup_game.yaml

# Start the level
- tapOn:
    id: 'current-level-action-button'

# Wait for briefing screen to load
- extendedWaitUntil:
    visible: '.*'
    timeout: 5000

# Scroll down to find the Next button
- scroll

# Wait for content to settle
- extendedWaitUntil:
    visible: '.*'
    timeout: 3000

# Tap Next button (bottom right of card)
- tapOn:
    point: '75%,85%'

# Wait and scroll for next situation
- extendedWaitUntil:
    visible: '.*'
    timeout: 2000
- scroll

# Tap Next again
- tapOn:
    point: '75%,85%'
    optional: true

# Test passes - navigated through briefing

