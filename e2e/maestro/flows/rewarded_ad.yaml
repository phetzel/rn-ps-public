appId: com.phetzel.rnps
name: Rewarded Ad Flow
tags:
  - monetization
  - flaky
onFlowStart:
  - launchApp
---
# Note: Rewarded ads may not be available in test/debug builds
# This flow tests the UI interaction, actual ad delivery depends on AdMob config

# Connect to dev server
- runFlow: ../shared/connect_dev_server.yaml

# Wait for app to load
- extendedWaitUntil:
    visible: '.*'
    timeout: 30000

# Dismiss disclaimer if present
- tapOn:
    id: 'disclaimer-acknowledge-button'
    optional: true

# Clean up any existing games first
- runFlow: ../shared/cleanup_games.yaml

# Create a new game
- runFlow: ../shared/setup_game.yaml

# Look for rewarded ad trigger (e.g., "Watch Ad" button)
- tapOn:
    text: 'Watch Ad'
    optional: true
- tapOn:
    text: 'Earn Reward'
    optional: true

# If using Google's test ad units, wait for ad to complete
- extendedWaitUntil:
    visible: 'Close'
    timeout: 35000
    optional: true
- tapOn:
    text: 'Close'
    optional: true
